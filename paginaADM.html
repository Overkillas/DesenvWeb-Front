<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/CriarPasseio.css">

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <span class="navbar-brand mx-auto text-warning fw-bold text-center" style="font-size: 2rem;">
                Bem-vindo ao Painel Administrativo
            </span>
            <button id="logout-btn" class="btn btn-warning btn-sm text-dark fw-bold">Sair</button>

        </div>
    </nav>
    <!-- Seção de Visualizar Reservas -->
    <section id="reservas" class="container py-5">
    <h2 class="text-primary mb-4">Reservas</h2>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead class="bg-primary text-white">
                <tr>
                    <th>#</th>
                    <th>Nome do Cliente</th>
                    <th>Passeio</th>
                    <th>Data</th>
                    <th>Horário</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="reservas-body">
                <!-- Reservas serão inseridas dinamicamente -->
            </tbody>
        </table>
    </div>
</section>


    <!-- Seção de Criar Passeio -->
    <section id="criar-passeio" class="container py-5">
        <div class="row">
            <div class="col-lg-6">
                <!-- Formulário -->
                <form id="create-tour-form" class="shadow-lg p-4 rounded-lg bg-white">
                    <h3 class="text-primary mb-4">Criar Passeio</h3>

                    <!-- Nome do Passeio -->
                    <div class="mb-3">
                        <label for="tour-name" class="form-label">Nome do Passeio</label>
                        <input type="text" id="tour-name" class="form-control" placeholder="Ex: Passeio nas Dunas" required>
                    </div>

                    <!-- Descrição -->
                    <div class="mb-3">
                        <label for="tour-description" class="form-label">Descrição</label>
                        <textarea id="tour-description" class="form-control" rows="3" placeholder="Descreva o passeio" required></textarea>
                    </div>

                    <!-- Preço -->
                    <div class="mb-3">
                        <label for="tour-price" class="form-label">Preço por Pessoa (R$)</label>
                        <input type="number" id="tour-price" class="form-control" placeholder="Ex: 250.00" required>
                    </div>

                    <!-- Capacidade -->
                    <div class="mb-3">
                        <label for="tour-capacity" class="form-label">Número Máximo de Pessoas</label>
                        <input type="number" id="tour-capacity" class="form-control" placeholder="Ex: 10" required>
                    </div>

                    <!-- Localização -->
                    <div class="mb-3 position-relative">
                        <label for="tour-location" class="form-label">Localização</label>
                        <input type="text" id="tour-location" class="form-control" placeholder="Digite um endereço" required>
                    </div>

                    <!-- Data -->
                    <div class="mb-3">
                        <label for="tour-date" class="form-label">Data</label>
                        <input type="date" id="tour-date" class="form-control" required>
                    </div>

                    <!-- Horário -->
                    <div class="mb-3">
                        <label for="tour-time" class="form-label">Horário</label>
                        <input type="time" id="tour-time" class="form-control" required>
                    </div>

                    <!-- Upload de Imagens -->
                    <div class="mb-3">
                        <label for="tour-images" class="form-label">Imagens do Passeio</label>
                        <input type="file" id="tour-images" class="form-control" accept="image/*" multiple required>
                        <small class="form-text text-muted">Você pode adicionar várias imagens.</small>
                    </div>

                    <!-- Botão Criar -->
                    <button type="submit" class="btn btn-primary w-100 py-2" id="create-tour-btn">Criar Passeio</button>

                </form>
            </div>

            <!-- Pré-visualização -->
            <div class="col-lg-6">
                <div class="bg-light rounded-lg shadow-lg p-4">
                    <h4 class="text-primary mb-4">Pré-visualização do Passeio</h4>
                    <div id="tour-preview" class="d-flex flex-column gap-3">
                        <h5 class="text-muted">Preencha os campos para ver a pré-visualização</h5>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- jQuery e JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="js/admpasseio.js"></script> 
    <script src="js/admreserva.js"></script> 

<script>
    document.getElementById('create-tour-form').addEventListener('submit', async (event) => {
    event.preventDefault();

    const nome = document.getElementById('tour-name').value;
    const lugar = document.getElementById('tour-location').value; // Mapeando "lugar"
    const descricao = document.getElementById('tour-description').value;
    const data = document.getElementById('tour-date').value; // Date em formato `YYYY-MM-DD`
    const hora = document.getElementById('tour-time').value; // Hora em formato `HH:mm:ss`
    const valor = parseFloat(document.getElementById('tour-price').value);

    const passeioData = {
        nome,
        lugar,
        descricao,
        data,
        hora,
        valor,
    };

    try {
        const response = await passeioService.criar(passeioData);
        alert('Passeio criado com sucesso!');
        console.log(response); // Loga o retorno da API no console
        document.getElementById('create-tour-form').reset();
    } catch (error) {
        alert('Erro ao criar o passeio. Verifique os dados.');
        console.error(error);
    }
});
</script>

</body>
</html>
<script type="module">
    import { authService } from './js/api.js';

    document.addEventListener('DOMContentLoaded', () => {
        const logoutButton = document.getElementById('logout-btn');
        if (logoutButton) {
            logoutButton.addEventListener('click', (event) => {
                event.preventDefault();
                authService.logout(); // Chama a função de logout do api.js
            });
        }
    });
    document.getElementById('logout-btn').addEventListener('click', () => {
        const confirmLogout = confirm('Tem certeza que deseja sair?');
        if (confirmLogout) {
            window.location.href = "index.html";
        }
    });
</script>
